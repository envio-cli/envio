#compdef envio

autoload -U is-at-least

_envio() {
    typeset -A opt_args
    typeset -a _arguments_options
    local ret=1

    if is-at-least 5.2; then
        _arguments_options=(-s -S -C)
    else
        _arguments_options=(-s -C)
    fi

    local context curcontext="$curcontext" state line
    _arguments "${_arguments_options[@]}" \
'-h[Print help]' \
'--help[Print help]' \
":: :_envio_commands" \
"*::: :->envio" \
&& ret=0
    case $state in
    (envio)
        words=($line[1] "${words[@]}")
        (( CURRENT += 1 ))
        curcontext="${curcontext%:*:*}:envio-command-$line[1]:"
        case $line[1] in
            (profile)
_arguments "${_arguments_options[@]}" \
'-h[Print help]' \
'--help[Print help]' \
":: :_envio__profile_commands" \
"*::: :->profile" \
&& ret=0

    case $state in
    (profile)
        words=($line[1] "${words[@]}")
        (( CURRENT += 1 ))
        curcontext="${curcontext%:*:*}:envio-profile-command-$line[1]:"
        case $line[1] in
            (create)
_arguments "${_arguments_options[@]}" \
'-f+[file path to load environment variables from]:ENVS_FILE: ' \
'--from-file=[file path to load environment variables from]:ENVS_FILE: ' \
'*-e+[environment variables to add (format\: KEY=VALUE or only provide KEY and the value will be prompted for)]:ENVS: ' \
'*--envs=[environment variables to add (format\: KEY=VALUE or only provide KEY and the value will be prompted for)]:ENVS: ' \
'-k+[encryption cipher to use]:CIPHER_KIND: ' \
'--cipher-kind=[encryption cipher to use]:CIPHER_KIND: ' \
'-c[add comments to the provided environment variables]' \
'--comments[add comments to the provided environment variables]' \
'-x[add expiration dates to the provided environment variables]' \
'--expires[add expiration dates to the provided environment variables]' \
'-h[Print help]' \
'--help[Print help]' \
':profile_name -- name of the profile:' \
&& ret=0
;;
(delete)
_arguments "${_arguments_options[@]}" \
'-h[Print help]' \
'--help[Print help]' \
':profile_name -- name of the profile:' \
&& ret=0
;;
(list)
_arguments "${_arguments_options[@]}" \
'--no-pretty-print[disable pretty printing]' \
'-h[Print help]' \
'--help[Print help]' \
&& ret=0
;;
(show)
_arguments "${_arguments_options[@]}" \
'-c[display comments]' \
'--show-comments[display comments]' \
'-x[display expiration dates]' \
'--show-expiration[display expiration dates]' \
'--no-pretty-print[disable pretty printing]' \
'-h[Print help]' \
'--help[Print help]' \
':profile_name -- name of the profile:' \
&& ret=0
;;
        esac
    ;;
esac
;;
(set)
_arguments "${_arguments_options[@]}" \
'-c[add comments to the provided environment variables]' \
'--comments[add comments to the provided environment variables]' \
'-x[add expiration dates to the provided environment variables]' \
'--expires[add expiration dates to the provided environment variables]' \
'-h[Print help]' \
'--help[Print help]' \
':profile_name -- name of the profile:' \
'*::envs -- environment variables to set (format\: KEY=VALUE or only provide KEY and the value will be prompted for):' \
&& ret=0
;;
(unset)
_arguments "${_arguments_options[@]}" \
'-h[Print help]' \
'--help[Print help]' \
':profile_name -- name of the profile:' \
'*::keys -- keys of environment variables to remove:' \
&& ret=0
;;
(load)
_arguments "${_arguments_options[@]}" \
'-h[Print help]' \
'--help[Print help]' \
':profile_name -- name of the profile:' \
&& ret=0
;;
(unload)
_arguments "${_arguments_options[@]}" \
'-h[Print help]' \
'--help[Print help]' \
&& ret=0
;;
(run)
_arguments "${_arguments_options[@]}" \
'-h[Print help]' \
'--help[Print help]' \
':profile_name -- name of the profile:' \
'*::command -- command to run:' \
&& ret=0
;;
(import)
_arguments "${_arguments_options[@]}" \
'-n+[name for the imported profile]:PROFILE_NAME: ' \
'--profile-name=[name for the imported profile]:PROFILE_NAME: ' \
'-h[Print help]' \
'--help[Print help]' \
':source -- source file or url:' \
&& ret=0
;;
(export)
_arguments "${_arguments_options[@]}" \
'-t+[output file path]:FILE: ' \
'--to=[output file path]:FILE: ' \
'*-k+[comma-separated list of keys to export leave empty to prompt for selection]:KEYS: ' \
'*--keys=[comma-separated list of keys to export leave empty to prompt for selection]:KEYS: ' \
'-h[Print help]' \
'--help[Print help]' \
':profile_name -- name of the profile:' \
&& ret=0
;;
(version)
_arguments "${_arguments_options[@]}" \
'-v[show verbose version information]' \
'--verbose[show verbose version information]' \
'-h[Print help]' \
'--help[Print help]' \
&& ret=0
;;
        esac
    ;;
esac
}

(( $+functions[_envio_commands] )) ||
_envio_commands() {
    local commands; commands=(
'profile:manage profiles' \
'set:set or update environment variables in a profile' \
'unset:remove environment variables from a profile' \
'load:load environment variables from a profile for use in the current terminal session' \
'unload:unload a profile from the current terminal session' \
'run:run a command with profile environment variables' \
'import:import a profile from a file or url' \
'export:export a profile to a file' \
'version:print version information' \
    )
    _describe -t commands 'envio commands' commands "$@"
}
(( $+functions[_envio__profile__create_commands] )) ||
_envio__profile__create_commands() {
    local commands; commands=()
    _describe -t commands 'envio profile create commands' commands "$@"
}
(( $+functions[_envio__profile__delete_commands] )) ||
_envio__profile__delete_commands() {
    local commands; commands=()
    _describe -t commands 'envio profile delete commands' commands "$@"
}
(( $+functions[_envio__export_commands] )) ||
_envio__export_commands() {
    local commands; commands=()
    _describe -t commands 'envio export commands' commands "$@"
}
(( $+functions[_envio__import_commands] )) ||
_envio__import_commands() {
    local commands; commands=()
    _describe -t commands 'envio import commands' commands "$@"
}
(( $+functions[_envio__profile__list_commands] )) ||
_envio__profile__list_commands() {
    local commands; commands=()
    _describe -t commands 'envio profile list commands' commands "$@"
}
(( $+functions[_envio__load_commands] )) ||
_envio__load_commands() {
    local commands; commands=()
    _describe -t commands 'envio load commands' commands "$@"
}
(( $+functions[_envio__profile_commands] )) ||
_envio__profile_commands() {
    local commands; commands=(
'create:create a new profile' \
'delete:delete a profile' \
'list:list all profiles' \
'show:show environment variables in a profile' \
    )
    _describe -t commands 'envio profile commands' commands "$@"
}
(( $+functions[_envio__run_commands] )) ||
_envio__run_commands() {
    local commands; commands=()
    _describe -t commands 'envio run commands' commands "$@"
}
(( $+functions[_envio__set_commands] )) ||
_envio__set_commands() {
    local commands; commands=()
    _describe -t commands 'envio set commands' commands "$@"
}
(( $+functions[_envio__profile__show_commands] )) ||
_envio__profile__show_commands() {
    local commands; commands=()
    _describe -t commands 'envio profile show commands' commands "$@"
}
(( $+functions[_envio__unload_commands] )) ||
_envio__unload_commands() {
    local commands; commands=()
    _describe -t commands 'envio unload commands' commands "$@"
}
(( $+functions[_envio__unset_commands] )) ||
_envio__unset_commands() {
    local commands; commands=()
    _describe -t commands 'envio unset commands' commands "$@"
}
(( $+functions[_envio__version_commands] )) ||
_envio__version_commands() {
    local commands; commands=()
    _describe -t commands 'envio version commands' commands "$@"
}

if [ "$funcstack[1]" = "_envio" ]; then
    _envio "$@"
else
    compdef _envio envio
fi
